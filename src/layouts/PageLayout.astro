<!--
  PageLayout.astro
  
  Page-specific layout component that wraps BaseLayout with additional features.
  Manages ASCII background, animated logo background, and layout modes.
  Provides configurable layout options for different page types (standard vs ASCII).
  Imports global styles and handles conditional component rendering.
-->

---
import BaseLayout from './BaseLayout.astro';


import ASCIIBackground from '../components/ASCIIBackground.astro';
import AnimatedLogoBackground from '../components/AnimatedLogoBackground.astro';
import '../styles/global.scss';

export interface Props {
  title: string;
  description?: string;
  isASCIILayout?: boolean;
  hideLogoBackground?: boolean;
}

const { title, description, isASCIILayout = false, hideLogoBackground = false } = Astro.props;
---

<BaseLayout title={title} description={description} isASCIILayout={isASCIILayout}>
  <div transition:persist="ascii-bg-wrapper">
    <ASCIIBackground />
  </div>
  
  {!hideLogoBackground && (
    <div transition:persist="logo-bg-wrapper">
      <AnimatedLogoBackground />
    </div>
  )}
  
  <main class={`main-content ${isASCIILayout ? 'ascii-layout' : ''}`}>
    <slot />
  </main>
</BaseLayout>

<style lang="scss">
  .main-content {
    &.ascii-layout {
      padding: 0;
      min-height: 100vh;
      min-height: var(--dvh); /* Use dynamic viewport height when supported */
      height: 100vh;
      height: var(--dvh); /* Use dynamic viewport height when supported */
      overflow: hidden; 
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }
    
    &:not(.ascii-layout) {
      padding-top: 2rem;
      min-height: calc(100vh - 160px);
      min-height: calc(var(--dvh) - 160px); /* Use dynamic viewport height when supported */
    }
  }
</style>
